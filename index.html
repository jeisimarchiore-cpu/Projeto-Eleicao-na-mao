<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa de Igrejas de Blumenau</title>

    <!-- 1. Incluindo a biblioteca Leaflet.js (CSS e JS) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <!-- Incluindo o plugin Leaflet.awesome-markers para ícones melhores -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.min.js"></script>
    
    <!-- Font Awesome para os ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">


    <style>
        /* Estilos CSS Reformulados */
        html, body { height: 100%; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f0f2f5; }
        #map { height: 100%; width: 100%; cursor: grab; }
        
        .leaflet-popup-content-wrapper { border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .leaflet-popup-content h3 { margin: 0 0 10px; color: #1c1c1c; font-size: 1.2em; border-bottom: 1px solid #eee; padding-bottom: 8px; display: flex; align-items: center; gap: 8px;}
        .leaflet-popup-content p { margin: 8px 0; font-size: 0.95em; color: #555; line-height: 1.5; }
        .popup-info-line { display: flex; align-items: center; gap: 8px; }
        .popup-info-line i { color: #007bff; }
        
        .popup-actions { margin-top: 15px; display: flex; gap: 8px; border-top: 1px solid #eee; padding-top: 10px; }
        .popup-btn { padding: 6px 12px; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 0.9em; transition: opacity 0.2s; }
        .popup-btn:hover { opacity: 0.85; }
        .popup-edit-btn { background-color: #ffc107; color: #333; }
        .popup-delete-btn { background-color: #dc3545; }

        .modal-overlay { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5); animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .modal-content { background-color: #fefefe; margin: 10% auto; padding: 25px; border: 1px solid #888; width: 90%; max-width: 700px; border-radius: 10px; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .modal-content h2, #side-panel h3 { color: #333; }
        .modal-close-btn { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; }
        
        #bottom-left-controls { position: absolute; bottom: 20px; left: 20px; z-index: 999; display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
        #church-counter { background: white; padding: 8px 15px; border-radius: 8px; font-size: 1em; font-weight: bold; box-shadow: 0 2px 8px rgba(0,0,0,0.15); cursor: pointer; line-height: 1.4; }
        
        #add-church-toggle-btn { position: absolute; top: 10px; right: 10px; z-index: 999; width: 45px; height: 45px; font-size: 1.8em; background: linear-gradient(45deg, #007bff, #0056b3); color: white; border: none; border-radius: 50%; box-shadow: 0 4px 10px rgba(0,0,0,0.2); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: transform 0.2s; }
        #add-church-toggle-btn:hover { transform: scale(1.1); }
        
        .filter-container { background: white; padding: 8px 12px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); display: flex; align-items: center; }
        .filter-container label { font-weight: bold; margin-right: 8px; font-size: 0.9em; }
        .filter-container select { padding: 6px; border-radius: 5px; border: 1px solid #ccc; background-color: #fff; }
    </style>
</head>
<body>

    <div id="map"></div>
    <div id="bottom-left-controls">
        <div id="church-counter">Carregando...</div>
        <div class="filter-container">
            <label for="bairro-filter-select"><i class="fa fa-map-marked-alt"></i></label>
            <select id="bairro-filter-select"></select>
        </div>
        <div class="filter-container">
            <label for="denom-filter-select"><i class="fa fa-cross"></i></label>
            <select id="denom-filter-select"></select>
        </div>
    </div>
    <button id="add-church-toggle-btn" title="Adicionar Nova Igreja">+</button>

    <!-- Modais -->
    <div id="edit-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="modal-close-btn">&times;</span>
            <h2 id="panel-title">Adicionar Nova Igreja</h2>
            <form id="church-form">
                <!-- Conteúdo do formulário ... -->
            </form>
        </div>
    </div>
    <!-- Outros modais... -->

    <script type="module">
        // Imports do Firebase...
        // Config do Firebase...
        // ... Lógica JS ...
    </script>
</body>
</html>

